<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "https://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml" lang="en-US">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=11"/>
<meta name="generator" content="Doxygen 1.9.8"/>
<meta name="viewport" content="width=device-width, initial-scale=1"/>
<title>Thread System: samples/service_registry_sample/main.cpp File Reference</title>
<link href="../../tabs.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="../../jquery.js"></script>
<script type="text/javascript" src="../../dynsections.js"></script>
<link href="../../search/search.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="../../search/searchdata.js"></script>
<script type="text/javascript" src="../../search/search.js"></script>
<link href="../../doxygen.css" rel="stylesheet" type="text/css" />
</head>
<body>
<div id="top"><!-- do not remove this div, it is closed by doxygen! -->
<div id="titlearea">
<table cellspacing="0" cellpadding="0">
 <tbody>
 <tr id="projectrow">
  <td id="projectalign">
   <div id="projectname">Thread System
   </div>
  </td>
 </tr>
 </tbody>
</table>
</div>
<!-- end header part -->
<!-- Generated by Doxygen 1.9.8 -->
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:d3d9a9a6595521f9666a5e94cc830dab83b65699&amp;dn=expat.txt MIT */
var searchBox = new SearchBox("searchBox", "../../search/",'.html');
/* @license-end */
</script>
<script type="text/javascript" src="../../menudata.js"></script>
<script type="text/javascript" src="../../menu.js"></script>
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:d3d9a9a6595521f9666a5e94cc830dab83b65699&amp;dn=expat.txt MIT */
$(function() {
  initMenu('../../',true,false,'search.php','Search');
  $(document).ready(function() { init_search(); });
});
/* @license-end */
</script>
<div id="main-nav"></div>
<!-- window showing the filter options -->
<div id="MSearchSelectWindow"
     onmouseover="return searchBox.OnSearchSelectShow()"
     onmouseout="return searchBox.OnSearchSelectHide()"
     onkeydown="return searchBox.OnSearchSelectKey(event)">
</div>

<!-- iframe showing the search results (closed by default) -->
<div id="MSearchResultsWindow">
<div id="MSearchResults">
<div class="SRPage">
<div id="SRIndex">
<div id="SRResults"></div>
<div class="SRStatus" id="Loading">Loading...</div>
<div class="SRStatus" id="Searching">Searching...</div>
<div class="SRStatus" id="NoMatches">No Matches</div>
</div>
</div>
</div>
</div>

<div id="nav-path" class="navpath">
  <ul>
<li class="navelem"><a class="el" href="../../dir_6f9635d4fbfa321d4c00f29df5cd540c.html">samples</a></li><li class="navelem"><a class="el" href="../../dir_c0bf8a9da759280f76ec532b8e6744be.html">service_registry_sample</a></li>  </ul>
</div>
</div><!-- top -->
<div class="header">
  <div class="summary">
<a href="#nested-classes">Classes</a> &#124;
<a href="#func-members">Functions</a>  </div>
  <div class="headertitle"><div class="title">main.cpp File Reference</div></div>
</div><!--header-->
<div class="contents">
<div class="textblock"><code>#include &lt;iostream&gt;</code><br />
<code>#include &lt;memory&gt;</code><br />
<code>#include &lt;thread&gt;</code><br />
<code>#include &lt;atomic&gt;</code><br />
<code>#include &quot;<a class="el" href="../../d3/d07/service__registry_8h_source.html">service_registry.h</a>&quot;</code><br />
<code>#include &quot;<a class="el" href="../../d3/dec/thread__pool_8h_source.html">thread_pool.h</a>&quot;</code><br />
<code>#include &quot;<a class="el" href="../../d9/de2/thread__worker_8h_source.html">thread_worker.h</a>&quot;</code><br />
<code>#include &quot;<a class="el" href="../../db/ddd/callback__job_8h_source.html">callback_job.h</a>&quot;</code><br />
</div><div class="textblock"><div class="dynheader">
Include dependency graph for main.cpp:</div>
<div class="dyncontent">
<div class="center"><img src="../../d4/d68/service__registry__sample_2main_8cpp__incl.png" border="0" usemap="#asamples_2service__registry__sample_2main_8cpp" alt=""/></div>
<map name="asamples_2service__registry__sample_2main_8cpp" id="asamples_2service__registry__sample_2main_8cpp">
<area shape="rect" title=" " alt="" coords="1321,5,1506,45"/>
<area shape="rect" title=" " alt="" coords="255,93,335,119"/>
<area shape="poly" title=" " alt="" coords="1321,30,1143,35,903,46,629,65,349,96,348,91,629,60,903,40,1143,30,1320,25"/>
<area shape="rect" title=" " alt="" coords="1449,343,1527,368"/>
<area shape="poly" title=" " alt="" coords="1321,38,1134,64,1031,85,934,112,854,147,824,166,802,188,789,211,786,236,795,263,817,293,828,300,848,308,908,320,1084,338,1280,347,1435,351,1435,356,1280,352,1083,343,907,325,846,313,826,305,813,297,790,265,781,236,784,209,798,184,821,162,852,142,932,107,1030,80,1133,59,1320,32"/>
<area shape="rect" title=" " alt="" coords="2915,93,2979,119"/>
<area shape="poly" title=" " alt="" coords="1506,26,2205,47,2604,66,2770,78,2896,91,2902,91,2901,97,2896,96,2770,83,2604,72,2205,53,1506,31"/>
<area shape="rect" title=" " alt="" coords="2564,343,2631,368"/>
<area shape="poly" title=" " alt="" coords="1507,23,1817,29,2017,39,2227,57,2431,86,2526,104,2614,126,2693,152,2760,181,2815,215,2854,253,2862,267,2866,279,2864,291,2858,302,2836,319,2803,331,2722,348,2645,355,2644,350,2722,342,2802,326,2833,314,2854,298,2859,289,2860,280,2857,269,2850,256,2811,219,2758,186,2691,157,2613,131,2525,110,2430,91,2227,63,2017,44,1817,34,1506,28"/>
<area shape="rect" href="../../d3/d07/service__registry_8h.html" title=" " alt="" coords="359,93,495,119"/>
<area shape="poly" title=" " alt="" coords="1321,37,509,101,508,96,1320,31"/>
<area shape="rect" href="../../d3/dec/thread__pool_8h.html" title=" " alt="" coords="1433,93,1543,119"/>
<area shape="poly" title=" " alt="" coords="1433,44,1469,81,1465,85,1429,47"/>
<area shape="rect" href="../../d9/de2/thread__worker_8h.html" title=" " alt="" coords="1127,174,1254,199"/>
<area shape="poly" title=" " alt="" coords="1388,48,1220,168,1216,164,1385,43"/>
<area shape="rect" href="../../db/ddd/callback__job_8h.html" title=" " alt="" coords="2105,93,2220,119"/>
<area shape="poly" title=" " alt="" coords="1507,34,2092,95,2091,100,1506,39"/>
<area shape="poly" title=" " alt="" coords="444,117,495,153,574,202,669,252,720,274,771,292,830,305,907,316,1096,333,1289,344,1436,350,1435,355,1289,349,1096,338,907,321,829,310,770,297,718,279,667,257,571,206,492,157,441,121"/>
<area shape="rect" title=" " alt="" coords="403,174,450,199"/>
<area shape="poly" title=" " alt="" coords="429,119,429,160,424,160,424,119"/>
<area shape="rect" title=" " alt="" coords="5,174,120,199"/>
<area shape="poly" title=" " alt="" coords="365,121,133,169,117,173,116,168,131,164,364,116"/>
<area shape="rect" title=" " alt="" coords="145,174,231,199"/>
<area shape="poly" title=" " alt="" coords="391,121,244,169,234,172,233,167,242,164,390,116"/>
<area shape="rect" title=" " alt="" coords="255,174,379,199"/>
<area shape="poly" title=" " alt="" coords="412,121,346,168,343,164,409,117"/>
<area shape="poly" title=" " alt="" coords="1491,119,1491,329,1485,329,1485,119"/>
<area shape="rect" title=" " alt="" coords="1525,255,1672,295"/>
<area shape="poly" title=" " alt="" coords="1498,117,1581,242,1576,245,1493,120"/>
<area shape="rect" title=" " alt="" coords="1113,255,1269,295"/>
<area shape="poly" title=" " alt="" coords="1469,121,1238,250,1235,245,1466,116"/>
<area shape="poly" title=" " alt="" coords="1445,121,1248,173,1246,168,1444,116"/>
<area shape="rect" title=" " alt="" coords="1696,255,1843,295"/>
<area shape="poly" title=" " alt="" coords="1544,109,1604,116,1668,128,1724,143,1746,153,1761,165,1772,182,1777,202,1778,241,1773,241,1772,203,1767,184,1757,168,1743,158,1722,148,1667,133,1603,122,1543,115"/>
<area shape="rect" href="../../d9/d88/thread__pool_2include_2detail_2forward__declarations_8h.html" title="Forward declarations for thread_pool module." alt="" coords="439,343,651,368"/>
<area shape="poly" title=" " alt="" coords="1432,112,1168,127,995,144,822,169,748,180,652,196,605,207,562,221,528,237,505,256,498,274,502,294,513,313,526,331,522,334,508,316,497,296,493,274,500,253,525,232,560,216,603,202,651,191,747,175,821,164,995,138,1167,121,1432,106"/>
<area shape="rect" title=" " alt="" coords="1293,255,1451,295"/>
<area shape="poly" title=" " alt="" coords="1482,120,1395,245,1391,242,1478,117"/>
<area shape="rect" href="../../df/d4c/thread__pool_2include_2config_8h.html" title="Central configuration for thread_pool module." alt="" coords="342,343,415,368"/>
<area shape="poly" title=" " alt="" coords="1433,112,973,131,732,148,645,158,594,169,562,185,532,204,476,249,430,295,398,333,394,330,426,291,472,245,528,200,560,180,592,164,644,153,731,142,973,125,1432,106"/>
<area shape="rect" title=" " alt="" coords="680,416,747,441"/>
<area shape="poly" title=" " alt="" coords="1433,116,1290,134,1107,164,1016,183,933,205,864,230,816,257,783,291,756,331,737,370,724,404,719,402,732,368,752,328,779,287,813,253,862,225,931,200,1015,178,1106,159,1289,129,1432,111"/>
<area shape="rect" title=" " alt="" coords="2003,343,2061,368"/>
<area shape="poly" title=" " alt="" coords="1544,108,1659,125,1725,141,1788,164,1836,194,1898,240,2010,331,2006,336,1895,244,1833,198,1786,169,1723,146,1658,130,1543,113"/>
<area shape="rect" title=" " alt="" coords="2131,343,2194,368"/>
<area shape="poly" title=" " alt="" coords="1544,108,1680,125,1760,141,1838,164,1904,193,1953,222,1999,254,2060,292,2132,334,2130,338,2057,297,1996,258,1950,226,1902,197,1836,169,1759,146,1679,130,1543,113"/>
<area shape="rect" title=" " alt="" coords="1576,167,1747,207"/>
<area shape="poly" title=" " alt="" coords="1514,116,1608,159,1606,163,1512,121"/>
<area shape="rect" title=" " alt="" coords="2070,262,2125,287"/>
<area shape="poly" title=" " alt="" coords="1544,108,1759,128,1871,144,1950,164,1988,183,2023,206,2078,251,2074,255,2020,210,1985,187,1948,169,1870,150,1759,134,1543,114"/>
<area shape="rect" title=" " alt="" coords="2781,343,2856,368"/>
<area shape="poly" title=" " alt="" coords="1544,106,1839,118,2258,143,2465,163,2647,187,2721,201,2782,217,2827,234,2854,253,2862,273,2860,294,2851,315,2840,333,2835,330,2847,312,2855,293,2857,273,2850,256,2825,239,2781,222,2720,206,2646,192,2465,168,2258,149,1839,123,1543,112"/>
<area shape="poly" title=" " alt="" coords="1155,202,1113,219,1074,241,1060,253,1052,266,1051,279,1058,293,1083,311,1122,325,1170,336,1225,343,1339,351,1435,352,1435,358,1339,356,1225,349,1169,341,1120,330,1081,316,1054,296,1045,280,1047,264,1056,250,1071,236,1111,214,1153,197"/>
<area shape="poly" title=" " alt="" coords="1246,197,1513,253,1511,258,1245,202"/>
<area shape="poly" title=" " alt="" coords="1193,200,1193,241,1188,241,1188,200"/>
<area shape="rect" title=" " alt="" coords="827,255,987,295"/>
<area shape="poly" title=" " alt="" coords="1153,202,983,253,981,248,1152,197"/>
<area shape="poly" title=" " alt="" coords="1255,192,1442,215,1683,252,1682,257,1442,221,1254,198"/>
<area shape="poly" title=" " alt="" coords="1127,192,970,198,777,210,607,229,548,242,529,249,518,256,510,273,512,292,519,312,530,330,526,333,515,315,507,293,505,272,514,253,527,244,547,237,606,224,776,204,970,193,1127,187"/>
<area shape="poly" title=" " alt="" coords="1216,197,1321,246,1319,251,1214,202"/>
<area shape="rect" href="../../d3/d09/worker__policy_8h.html" title="Worker behavior policies and configuration." alt="" coords="528,262,651,287"/>
<area shape="poly" title=" " alt="" coords="1127,200,664,265,664,260,1127,194"/>
<area shape="poly" title=" " alt="" coords="1170,202,1139,220,1111,244,1101,257,1095,269,1095,281,1102,293,1117,299,1151,305,1260,315,1581,329,2074,340,2118,345,2117,350,2073,345,1580,334,1260,321,1150,310,1116,304,1098,297,1090,283,1090,268,1096,254,1107,240,1136,216,1167,197"/>
<area shape="poly" title=" " alt="" coords="585,289,561,332,556,329,581,286"/>
<area shape="poly" title=" " alt="" coords="560,290,423,340,421,335,558,285"/>
<area shape="poly" title=" " alt="" coords="606,286,635,310,665,341,687,372,704,402,699,405,682,375,661,344,631,314,603,290"/>
<area shape="poly" title=" " alt="" coords="651,279,815,292,1515,330,1989,350,1989,355,1515,335,814,297,651,284"/>
<area shape="rect" title=" " alt="" coords="343,416,414,441"/>
<area shape="poly" title=" " alt="" coords="381,368,381,402,376,402,376,368"/>
<area shape="poly" title=" " alt="" coords="416,363,427,365,667,415,666,421,426,371,415,368"/>
<area shape="poly" title=" " alt="" coords="2147,121,2005,214,1920,265,1856,297,1771,322,1685,339,1605,349,1541,354,1540,349,1605,344,1684,334,1770,317,1854,292,1918,260,2002,210,2145,116"/>
<area shape="poly" title=" " alt="" coords="2154,121,2109,177,2084,215,2061,256,2047,294,2039,330,2034,329,2042,293,2056,254,2079,212,2105,173,2150,117"/>
<area shape="poly" title=" " alt="" coords="2165,119,2165,329,2160,329,2160,119"/>
<area shape="poly" title=" " alt="" coords="2220,105,2400,107,2630,115,2741,122,2837,132,2909,146,2933,155,2949,165,2970,197,2975,228,2968,261,2949,296,2936,308,2916,320,2867,340,2865,336,2914,315,2933,304,2945,293,2963,259,2970,228,2965,199,2945,169,2931,160,2908,151,2836,138,2741,127,2630,120,2400,112,2220,110"/>
<area shape="rect" href="../../d3/d6a/job_8h.html" title=" " alt="" coords="2313,174,2367,199"/>
<area shape="poly" title=" " alt="" coords="2190,116,2303,166,2301,171,2187,121"/>
<area shape="rect" title=" " alt="" coords="2981,343,3067,368"/>
<area shape="poly" title=" " alt="" coords="2220,106,2386,111,2605,122,2821,139,2910,151,2977,164,3034,177,3081,189,3102,197,3122,210,3140,228,3158,253,3166,275,3158,296,3145,308,3125,320,3074,341,3072,336,3122,315,3142,304,3154,293,3160,275,3154,256,3136,232,3118,214,3100,202,3080,194,3033,182,2975,169,2909,156,2820,145,2605,127,2386,117,2220,111"/>
<area shape="poly" title=" " alt="" coords="2322,202,2228,255,2177,281,2138,297,2086,309,2016,319,1847,336,1541,355,1540,349,1847,331,2015,314,2085,304,2137,292,2175,276,2226,250,2319,197"/>
<area shape="poly" title=" " alt="" coords="2368,185,2413,188,2468,198,2525,218,2551,233,2574,253,2586,270,2594,290,2600,328,2595,329,2589,291,2582,273,2570,256,2548,238,2522,223,2467,203,2412,193,2367,190"/>
<area shape="poly" title=" " alt="" coords="2313,192,2060,212,1877,231,1686,257,1685,252,1876,226,2059,207,2312,187"/>
<area shape="poly" title=" " alt="" coords="2313,195,1857,263,1856,258,2312,189"/>
<area shape="poly" title=" " alt="" coords="2343,200,2338,244,2331,271,2318,296,2295,326,2271,345,2244,358,2207,371,2170,379,2114,386,1955,399,1520,417,1067,426,760,430,760,424,1067,421,1520,411,1955,394,2114,381,2169,374,2206,365,2242,353,2268,340,2291,322,2314,293,2326,269,2333,243,2337,199"/>
<area shape="poly" title=" " alt="" coords="2332,201,2283,253,2233,297,2194,317,2152,332,2076,350,2074,345,2150,327,2191,312,2231,292,2279,249,2328,198"/>
<area shape="poly" title=" " alt="" coords="2339,200,2320,246,2305,272,2284,297,2247,324,2208,342,2206,337,2245,319,2281,293,2300,269,2315,243,2334,198"/>
<area shape="poly" title=" " alt="" coords="2314,200,2139,262,2137,257,2312,195"/>
<area shape="poly" title=" " alt="" coords="2368,190,2472,212,2537,230,2601,252,2638,271,2675,292,2776,335,2774,340,2672,297,2636,276,2599,257,2535,235,2471,218,2367,195"/>
<area shape="rect" href="../../d3/d11/error__handling_8h.html" title="Modern error handling for the thread system." alt="" coords="3016,262,3144,287"/>
<area shape="poly" title=" " alt="" coords="2368,189,3003,262,3002,267,2367,194"/>
<area shape="rect" title=" " alt="" coords="3318,343,3415,368"/>
<area shape="poly" title=" " alt="" coords="2368,186,2751,205,2986,225,3083,238,3157,252,3208,269,3258,291,3338,333,3335,338,3256,296,3206,274,3155,257,3083,243,2985,230,2750,211,2367,192"/>
<area shape="rect" href="../../d4/db5/cancellation__token_8h.html" title="Implementation of a cancellation token for cooperative cancellation." alt="" coords="2403,262,2559,287"/>
<area shape="poly" title=" " alt="" coords="2360,197,2452,253,2449,257,2358,202"/>
<area shape="rect" title=" " alt="" coords="2685,255,2840,295"/>
<area shape="poly" title=" " alt="" coords="2368,191,2672,252,2671,258,2367,196"/>
<area shape="poly" title=" " alt="" coords="3016,284,2852,297,2486,319,2326,328,2120,345,2076,351,2075,345,2120,340,2325,323,2486,313,2852,292,3015,279"/>
<area shape="poly" title=" " alt="" coords="3043,290,2870,341,2868,336,3041,285"/>
<area shape="rect" title=" " alt="" coords="3202,343,3294,368"/>
<area shape="poly" title=" " alt="" coords="3106,285,3213,335,3210,339,3103,290"/>
<area shape="poly" title=" " alt="" coords="3122,285,3313,337,3311,342,3121,290"/>
<area shape="rect" title=" " alt="" coords="2881,343,2957,368"/>
<area shape="poly" title=" " alt="" coords="3058,290,2955,339,2953,334,3055,285"/>
<area shape="poly" title=" " alt="" coords="3074,289,3042,333,3038,330,3070,286"/>
<area shape="rect" title=" " alt="" coords="3091,343,3178,368"/>
<area shape="poly" title=" " alt="" coords="3090,286,3121,330,3117,333,3086,289"/>
<area shape="poly" title=" " alt="" coords="2403,285,1540,353,1540,347,2403,279"/>
<area shape="poly" title=" " alt="" coords="2500,285,2570,333,2567,337,2497,290"/>
<area shape="poly" title=" " alt="" coords="2436,290,2208,346,2207,340,2434,285"/>
<area shape="poly" title=" " alt="" coords="2560,282,2742,306,2968,340,2967,345,2741,311,2559,288"/>
<area shape="rect" title=" " alt="" coords="2449,343,2513,368"/>
<area shape="poly" title=" " alt="" coords="2484,288,2484,329,2479,329,2479,288"/>
</map>
</div>
</div>
<p><a href="../../d9/d16/service__registry__sample_2main_8cpp_source.html">Go to the source code of this file.</a></p>
<table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a id="nested-classes" name="nested-classes"></a>
Classes</h2></td></tr>
<tr class="memitem:"><td class="memItemLeft" align="right" valign="top">struct &#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../d4/d9c/structdemo__service.html">demo_service</a></td></tr>
<tr class="separator:"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table><table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a id="func-members" name="func-members"></a>
Functions</h2></td></tr>
<tr class="memitem:ae66f6b31b5ad750f1fe042a706a4e3d4" id="r_ae66f6b31b5ad750f1fe042a706a4e3d4"><td class="memItemLeft" align="right" valign="top">int&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../d9/d16/service__registry__sample_2main_8cpp.html#ae66f6b31b5ad750f1fe042a706a4e3d4">main</a> ()</td></tr>
<tr class="separator:ae66f6b31b5ad750f1fe042a706a4e3d4"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table>
<h2 class="groupheader">Function Documentation</h2>
<a id="ae66f6b31b5ad750f1fe042a706a4e3d4" name="ae66f6b31b5ad750f1fe042a706a4e3d4"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ae66f6b31b5ad750f1fe042a706a4e3d4">&#9670;&#160;</a></span>main()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">int main </td>
          <td>(</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="../../d9/d16/service__registry__sample_2main_8cpp_source.html#l00022">22</a> of file <a class="el" href="../../d9/d16/service__registry__sample_2main_8cpp_source.html">main.cpp</a>.</p>
<div class="fragment"><div class="line"><span class="lineno">   22</span>           {</div>
<div class="line"><span class="lineno">   23</span>    <span class="comment">// Register and get a simple service</span></div>
<div class="line"><span class="lineno">   24</span>    <span class="keyword">auto</span> svc = std::make_shared&lt;demo_service&gt;();</div>
<div class="line"><span class="lineno">   25</span>    svc-&gt;name = <span class="stringliteral">&quot;demo&quot;</span>;</div>
<div class="line"><span class="lineno">   26</span>    service_registry::register_service&lt;demo_service&gt;(svc);</div>
<div class="line"><span class="lineno">   27</span>    <span class="keyword">auto</span> got = service_registry::get_service&lt;demo_service&gt;();</div>
<div class="line"><span class="lineno">   28</span>    std::cout &lt;&lt; <span class="stringliteral">&quot;service name = &quot;</span> &lt;&lt; (got ? got-&gt;name : <span class="stringliteral">&quot;&lt;null&gt;&quot;</span>) &lt;&lt; <span class="stringliteral">&quot;\n&quot;</span>;</div>
<div class="line"><span class="lineno">   29</span> </div>
<div class="line"><span class="lineno">   30</span>    <span class="comment">// Use executor_interface via thread_pool</span></div>
<div class="line"><span class="lineno">   31</span>    <span class="keyword">auto</span> pool = std::make_shared&lt;thread_pool&gt;(<span class="stringliteral">&quot;svc_pool&quot;</span>);</div>
<div class="line"><span class="lineno">   32</span>    std::vector&lt;std::unique_ptr&lt;thread_worker&gt;&gt; workers;</div>
<div class="line"><span class="lineno">   33</span>    workers.push_back(std::make_unique&lt;thread_worker&gt;(<span class="keyword">false</span>));</div>
<div class="line"><span class="lineno">   34</span>    <span class="keywordflow">if</span> (<span class="keyword">auto</span> r = pool-&gt;enqueue_batch(std::move(workers)); r.has_error()) {</div>
<div class="line"><span class="lineno">   35</span>        std::cerr &lt;&lt; r.get_error().to_string() &lt;&lt; <span class="stringliteral">&quot;\n&quot;</span>;</div>
<div class="line"><span class="lineno">   36</span>        <span class="keywordflow">return</span> 1;</div>
<div class="line"><span class="lineno">   37</span>    }</div>
<div class="line"><span class="lineno">   38</span>    <span class="keywordflow">if</span> (<span class="keyword">auto</span> r = pool-&gt;start(); r.has_error()) {</div>
<div class="line"><span class="lineno">   39</span>        std::cerr &lt;&lt; r.get_error().to_string() &lt;&lt; <span class="stringliteral">&quot;\n&quot;</span>;</div>
<div class="line"><span class="lineno">   40</span>        <span class="keywordflow">return</span> 1;</div>
<div class="line"><span class="lineno">   41</span>    }</div>
<div class="line"><span class="lineno">   42</span> </div>
<div class="line"><span class="lineno">   43</span>    std::atomic&lt;int&gt; count{0};</div>
<div class="line"><span class="lineno">   44</span>    <span class="keywordflow">if</span> (<span class="keyword">auto</span> r = pool-&gt;execute(std::make_unique&lt;callback_job&gt;([&amp;count]() -&gt; <a class="code hl_class" href="../../dd/da2/classthread__module_1_1result__void.html">result_void</a> {</div>
<div class="line"><span class="lineno">   45</span>            count.fetch_add(1);</div>
<div class="line"><span class="lineno">   46</span>            return result_void();</div>
<div class="line"><span class="lineno">   47</span>        })); r.has_error()) {</div>
<div class="line"><span class="lineno">   48</span>        std::cerr &lt;&lt; r.get_error().to_string() &lt;&lt; <span class="stringliteral">&quot;\n&quot;</span>;</div>
<div class="line"><span class="lineno">   49</span>    }</div>
<div class="line"><span class="lineno">   50</span> </div>
<div class="line"><span class="lineno">   51</span>    std::this_thread::sleep_for(std::chrono::milliseconds(50));</div>
<div class="line"><span class="lineno">   52</span>    std::cout &lt;&lt; <span class="stringliteral">&quot;executed jobs = &quot;</span> &lt;&lt; count.load() &lt;&lt; <span class="stringliteral">&quot;\n&quot;</span>;</div>
<div class="line"><span class="lineno">   53</span>    pool-&gt;shutdown();</div>
<div class="line"><span class="lineno">   54</span>    <span class="keywordflow">return</span> 0;</div>
<div class="line"><span class="lineno">   55</span>}</div>
<div class="ttc" id="aclassthread__module_1_1result__void_html"><div class="ttname"><a href="../../dd/da2/classthread__module_1_1result__void.html">thread_module::result_void</a></div><div class="ttdoc">Wrapper for void result.</div><div class="ttdef"><b>Definition</b> <a href="../../d3/d11/error__handling_8h_source.html#l00194">error_handling.h:194</a></div></div>
</div><!-- fragment -->
</div>
</div>
</div><!-- contents -->
<!-- start footer part -->
<hr class="footer"/><address class="footer"><small>
Generated on Sat Sep 6 2025 15:34:00 for Thread System by&#160;<a href="https://www.doxygen.org/index.html"><img class="footer" src="../../doxygen.svg" width="104" height="31" alt="doxygen"/></a> 1.9.8
</small></address>
</body>
</html>
